<p style="color: green"><%= notice %></p>


<div class="container mx-auto mt-8 flex-grow">
  <%= render @article %>

  <div>
    <% if user_signed_in? and current_user.id == @article.user_id %>

      <%= link_to "Edit this article", edit_article_path(@article) %> |
      <%= link_to "Back to articles", articles_path %>

      <%= button_to "Destroy this article", @article, method: :delete %>
    <% else %>
      <%= link_to "Back to articles", articles_path %>
    <% end %>
    <p>Likes: <%= @article.likes.size %></p>
    <% if user_signed_in? %>
      <% if !current_user.likes.exists?(user_id: current_user.id, article_id: @article.id) %>
        <%= button_to "Like", like_article_path(@article), method: :post %>
      <% else %>
        <%= button_to "Unlike", unlike_article_path(@article), method: :delete %>
      <% end %>
    <% end %>
  </div>
</div>

<h2>All Comments</h2>
<ul>
  <% @article.comments.each do |comment| %>
    <li>
      <p>
        <strong>User's email:</strong>
        <%= comment.user.email %>
      </p>
      <p>
        <strong>Comment Content:</strong>
        <%= comment.content %>
      </p>
    </li>
  <% end %>
</ul>

<% if defined?(@user) %>
  <%= link_to "New Comment", new_user_article_comment_path(@user, @article) %>
<% else %>
  <%= link_to "New Comment", new_article_comment_path(@article) %>
<% end %>
