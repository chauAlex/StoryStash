<p style="color: green"><%= notice %></p>

<%# remember to use flex-grow for other pages so that it works with the footer %>
<%# end %>

<div class="container mx-auto mt-8 flex-grow">
  <h1 class="text-4xl font-bold my-2">Articles</h1>
  <%= link_to "New article", new_article_path, class: "bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-1 px-2 border border-blue-500 hover:border-transparent rounded" %>


    <div id="articles" class="grid grid-cols-2 sm:grid-cols-1 lg:grid-cols-3 gap-4">
      <% @articles.each do |article| %>
        <% if article.price == 0 || user_signed_in? %>
        <div class="bg-white my-2 p-6 rounded-lg shadow-md overflow-hidden">
        <%= render article %>
        <p>
          <%# paid = Transaction.find_by(user_id: current_user.id, article_id: article.id) %>
          <% if user_signed_in? && current_user.id != article.user_id && article.price != 0 && !Transaction.find_by(user_id: current_user.id, article_id: article.id) %>
            <%= link_to "Pay", new_article_transaction_path(article) %>
          <% else %>
            <%= link_to "Show this article", article %>
          <% end %>
        </p>
        </div>
        <% end %>
      <% end %>
    </div>
</div>
